; MeshNet Audio - Receiver (RX) Node
; UDP Receive -> I2S Audio Output
;
; NOTE: Due to spaces in the project path, this project must be copied to /tmp before building.
; Use VS Code tasks: "pio: copy and build rx" or run the copy script manually.

[env:xiao_esp32s3]
platform = espressif32
board = seeed_xiao_esp32s3
framework = espidf

; Shared library location (relative to /tmp copy location)
lib_extra_dirs = ../lib

; ESP-IDF component dependencies via registry
lib_deps = 
    k0i05/esp_ssd1306@^1.0.2

; ESP-ADF integration
platform_packages = 
    framework-esp-idf-adf @ https://github.com/espressif/esp-adf.git#v2.6

; Build flags for hardware configuration
build_flags = 
    ; I2S pins for UDA1334 DAC
    -D I2S_BCK_IO=7
    -D I2S_WS_IO=8
    -D I2S_DATA_OUT_IO=9
    ; I2C pins for OLED
    -D I2C_MASTER_SCL_IO=6
    -D I2C_MASTER_SDA_IO=5
    ; Button GPIO
    -D BUTTON_GPIO=4

; Monitor configuration
monitor_speed = 115200
monitor_filters = 
    esp32_exception_decoder

; Upload configuration for RX device
upload_port = /dev/cu.usbmodem2101
upload_speed = 921600

; Debug configuration
debug_tool = esp-builtin
debug_init_break = tbreak app_main

; Board configuration
board_build.flash_mode = qio
board_build.flash_size = 8MB
board_build.f_cpu = 240000000L
board_build.f_flash = 80000000L
